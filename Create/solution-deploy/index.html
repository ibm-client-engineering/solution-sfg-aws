<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Create/solution-deploy">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Deploy | IBM Client Engineering</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ibm-client-engineering.github.io/solution-sfg-aws/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ibm-client-engineering.github.io/solution-sfg-aws/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ibm-client-engineering.github.io/solution-sfg-aws/Create/solution-deploy"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="ibm client engineering, open solutions library,  sfg, eks, aws, cp4ba, sfg on aws eks"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Deploy | IBM Client Engineering"><meta data-rh="true" name="description" content="Required secrets"><meta data-rh="true" property="og:description" content="Required secrets"><link data-rh="true" rel="icon" href="/solution-sfg-aws/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ibm-client-engineering.github.io/solution-sfg-aws/Create/solution-deploy"><link data-rh="true" rel="alternate" href="https://ibm-client-engineering.github.io/solution-sfg-aws/Create/solution-deploy" hreflang="en"><link data-rh="true" rel="alternate" href="https://ibm-client-engineering.github.io/solution-sfg-aws/Create/solution-deploy" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/solution-sfg-aws/blog/rss.xml" title="IBM Client Engineering RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/solution-sfg-aws/blog/atom.xml" title="IBM Client Engineering Atom Feed">






<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GB0XWXF3GE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GB0XWXF3GE",{anonymize_ip:!0})</script><link rel="stylesheet" href="/solution-sfg-aws/assets/css/styles.7c69883c.css">
<link rel="preload" href="/solution-sfg-aws/assets/js/runtime~main.4a676cb0.js" as="script">
<link rel="preload" href="/solution-sfg-aws/assets/js/main.f9aeead2.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/solution-sfg-aws/"><div class="navbar__logo"><img src="/solution-sfg-aws/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA" height="200" width="200"><img src="/solution-sfg-aws/img/logo-dark.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU" height="200" width="200"></div><b class="navbar__title text--truncate">| IBM Sterling File Gateway on AWS EKS</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/solution-sfg-aws/">Flight Path</a><a class="navbar__item navbar__link" href="/solution-sfg-aws/blog">Flight Logs</a><a href="https://github.com/ibm-client-engineering/solution-sfg-aws" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/solution-sfg-aws/">Flight Path | Sterling B2BI on AWS EKS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/solution-sfg-aws/category/innovate">Innovate</a><button aria-label="Toggle the collapsible sidebar category &#x27;Innovate&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-sfg-aws/Innovate/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-sfg-aws/Innovate/refine">Refine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-sfg-aws/Innovate/solution-design">Architecture</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/solution-sfg-aws/category/prepare">Prepare</a><button aria-label="Toggle the collapsible sidebar category &#x27;Prepare&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-sfg-aws/Prepare/learn">Learn</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-sfg-aws/Prepare/organize">Organize</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-sfg-aws/Prepare/stage">Stage</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/solution-sfg-aws/category/manage">Manage</a><button aria-label="Toggle the collapsible sidebar category &#x27;Manage&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/solution-sfg-aws/category/create">Create</a><button aria-label="Toggle the collapsible sidebar category &#x27;Create&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/solution-sfg-aws/Create/solution-deploy">Deploy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-sfg-aws/Create/solution-validate">Validate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-sfg-aws/Create/solution-integrate">Integrate</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/solution-sfg-aws/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/solution-sfg-aws/category/create"><span itemprop="name">Create</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Deploy</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Sterling Installation</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="required-secrets">Required secrets<a href="#required-secrets" class="hash-link" aria-label="Direct link to Required secrets" title="Direct link to Required secrets">​</a></h2><p>Create the following secrets in the <code>sterling</code> namespace</p><p><code>sterling-secrets.yaml</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">kind: Secret</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  name: b2b-system-passphrase-secret</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">type: Opaque</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">stringData:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  SYSTEM_PASSPHRASE: password</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">---</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">kind: Secret</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    name: mq-secret</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">type: Opaque</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">stringData:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    JMS_USERNAME: app</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    JMS_PASSWORD: mqpasswd</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">---</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">kind: Secret</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  name: b2b-db-secret</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">type: Opaque</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">stringData:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  DB_USER: SI_USER</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  DB_PASSWORD: dbpassword</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As a note, we are setting the user/pass for the database to <code>SI_USER</code> with a password of <code>dbpassword</code>.</p><p>Apply the secrets.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">kubectl apply -f sterling-secrets.yaml -n sterling</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sidecar-deployment">Sidecar Deployment<a href="#sidecar-deployment" class="hash-link" aria-label="Direct link to Sidecar Deployment" title="Direct link to Sidecar Deployment">​</a></h2><p>In order to upload the required jdbc drivers that b2bi will need to talk to the database, we must create a sidecar pod with a storage volume that will be shared.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="generate-the-yaml-file">Generate the yaml file<a href="#generate-the-yaml-file" class="hash-link" aria-label="Direct link to Generate the yaml file" title="Direct link to Generate the yaml file">​</a></h3><p>Create the following file</p><p><code>sterlingtoolkitdeploy.yaml</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">---</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">kind: PersistentVolumeClaim</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  name: sterlingtoolkit-pvc</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  accessModes:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    - ReadWriteMany</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  storageClassName: efs-sfg-sc</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  resources:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    requests:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      storage: 20Gi</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">---</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">apiVersion: apps/v1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">kind: Deployment</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  name: sterlingtoolkit</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">spec:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  replicas: 1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  selector:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    matchLabels:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      app: sterlingtoolkit</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  template:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    metadata:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      labels:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        app: sterlingtoolkit</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    spec:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      containers:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      - name: sterlingtoolkit</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        image: centos</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        command: [&quot;/bin/sh&quot;]</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        args: [&quot;-c&quot;, &quot;useradd -u 1010 b2biuser &amp;&amp; sleep infinity&quot;]</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        volumeMounts:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        - mountPath: /var/nfs-data/resources</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          name: storagevol</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      volumes:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      - name: storagevol</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        persistentVolumeClaim:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          claimName: sterlingtoolkit-pvc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-sidecar-pod-and-volume">Create the sidecar pod and volume<a href="#create-the-sidecar-pod-and-volume" class="hash-link" aria-label="Direct link to Create the sidecar pod and volume" title="Direct link to Create the sidecar pod and volume">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">kubectl apply -f sterlingtoolkitdeploy.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="retrieve-the-jdbc-driver-and-stage-it-to-the-pod">Retrieve the JDBC driver and stage it to the pod<a href="#retrieve-the-jdbc-driver-and-stage-it-to-the-pod" class="hash-link" aria-label="Direct link to Retrieve the JDBC driver and stage it to the pod" title="Direct link to Retrieve the JDBC driver and stage it to the pod">​</a></h3><p>Download the Oracle JDBC driver</p><p><a href="https://download.oracle.com/otn-pub/otn_software/jdbc/219/ojdbc8.jar" target="_blank" rel="noopener noreferrer">https://download.oracle.com/otn-pub/otn_software/jdbc/219/ojdbc8.jar</a></p><p>Determine our pod name</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">kubectl get pods</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">NAME                               READY   STATUS    RESTARTS   AGE</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">oracleclient                       1/1     Running   0          3h55m</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">sterlingtoolkit-577b8c56f5-dchdx   1/1     Running   0          4m59s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Upload the jar file to the appropriate folder</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">kubectl cp ojdbc11.jar sterlingtoolkit-577b8c56f5-dchdx:/var/nfs-data/resources</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="download-the-sterling-helm-charts">Download the Sterling helm charts<a href="#download-the-sterling-helm-charts" class="hash-link" aria-label="Direct link to Download the Sterling helm charts" title="Direct link to Download the Sterling helm charts">​</a></h2><p>The following link is for the required helm charts for this installation. If you haven&#x27;t already pulled this down, do it now.</p><p><a href="https://github.com/IBM/charts/raw/master/repo/ibm-helm/ibm-b2bi-prod-2.1.3.tgz" target="_blank" rel="noopener noreferrer">ibm-b2bi-prod-2.1.3</a></p><p>Download the <code>ibm-b2bi-prod</code> helm charts from the above link.</p><p>Extract the <code>ibm-b2bi-prod-2.1.3.tgz</code> file</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">tar zxvf ibm-b2bi-prod-2.1.3.tgz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Apply the patches included with this repo from the same directory you extracted the helm charts. There are also patches for 2.1.1 in that patch directory, but we are working with 2.1.3 of the helm charts.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">patch -p0 &lt; path/to/repo/patches/2.1.3/*.patch -V none</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/db-setup-job.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/ext-purge-job.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/post-delete-cleanup-job.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/postinstall-patch-ingress-job.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/preinstall-tls-setup-job.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/values.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/ingress.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/ac-backend-service.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/asi-backend-service.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/validation.tpl&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/values.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-our-chart-version">Update our chart version<a href="#update-our-chart-version" class="hash-link" aria-label="Direct link to Update our chart version" title="Direct link to Update our chart version">​</a></h3><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>As of this writing, you will need to update the version in the <code>Chart.yaml</code> in version 2.1.3 and below.</p></div></div><p>Update the Kubernetes version in the <code>Chart.yaml</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">tar zxvf ibm-b2bi-prod-2.1.3.tgz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Apply the patches included with this repo from the same directory you extracted the helm charts. </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">patch -p0 &lt; path/to/repo/patches/*.patch</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/db-setup-job.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/ext-purge-job.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/post-delete-cleanup-job.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/postinstall-patch-ingress-job.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/preinstall-tls-setup-job.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/values.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/ingress.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/ac-backend-service.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/asi-backend-service.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/templates/validation.tpl&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">patching file &#x27;ibm-b2bi-prod/values.yaml&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-our-chart-version-1">Update our chart version<a href="#update-our-chart-version-1" class="hash-link" aria-label="Direct link to Update our chart version" title="Direct link to Update our chart version">​</a></h3><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>As of this writing, you will need to update the version in the <code>Chart.yaml</code> in version 2.1.3 and below.</p></div></div><p>Update the Kubernetes version in the <code>Chart.yaml</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">cd ibm-b2bi-prod</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Retrieve our EKS kubernetes version</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">kubectl version --short</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">Client Version: v1.23.0</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">Kustomize Version: v4.5.7</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">Server Version: v1.23.14-eks-ffeb93d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Make a note of the <code>Server Version</code> and update the <code>Chart.yaml</code> file in the <code>ibm-b2bi-prod</code> directory.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">sed -i &quot;s/^kubeVersion:.*/kubeVersion: &#x27;&gt;=v1.23.14-eks-ffeb93d&#x27;/&quot; Chart.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sterling-override-file">Sterling Override File<a href="#sterling-override-file" class="hash-link" aria-label="Direct link to Sterling Override File" title="Direct link to Sterling Override File">​</a></h2><p>This is valid for installing the Sterling B2BI product. </p><p><a target="_blank" href="/solution-sfg-aws/assets/files/sterling-b2bi-values-d201733a08140cd751a62b2ce49dcedc.yaml">sterling-overrides-b2bi.yaml</a></p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>If you need to add custom labeling for the pods, look for this section under each application definition in the overrides file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">  # for pod Affinity and podAntiAffinity</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  extraLabels: {}</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    #acLabel: acValue</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Add the labels that would be applied to each pod</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">  # for pod Affinity and podAntiAffinity</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  extraLabels:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    customlabelname: customlabelvalue </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-the-overrides-as-required">Update the overrides as required<a href="#update-the-overrides-as-required" class="hash-link" aria-label="Direct link to Update the overrides as required" title="Direct link to Update the overrides as required">​</a></h3><p>Host entries for each ingress should match what your existing domain is if you don&#x27;t have a dedicated FQDN. This means you should set a wildcard.</p><p>In our example, we are not using a custom domain so our ingress host entries look like the following in the overrides document for each application (ac, asi, api):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">  ingress:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    internal:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      host: &quot;*.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      tls:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        enabled: true</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        secretName: sterling-b2bi-b2bi-ac-frontend-svc</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      extraPaths: []</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    external:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      host: &quot;*.amazonaws.com&quot; </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      tls:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        enabled: true</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        secretName: sterling-b2bi-b2bi-ac-frontend-svc</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      extraPaths: []</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-ingress-in-the-overrides">Configuring Ingress in the overrides<a href="#configuring-ingress-in-the-overrides" class="hash-link" aria-label="Direct link to Configuring Ingress in the overrides" title="Direct link to Configuring Ingress in the overrides">​</a></h3><p>Depending on whether you have installed the NGINX Ingress Controller or are using the native ALB Ingress, you will need to make the following updates to the overrides.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="alb-ingress">ALB Ingress<a href="#alb-ingress" class="hash-link" aria-label="Direct link to ALB Ingress" title="Direct link to ALB Ingress">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">ingress:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  enabled: true</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  controller: &quot;alb&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  annotations:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    alb.ingress.kubernetes.io/target-type: ip </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    alb.ingress.kubernetes.io/scheme: internet-facing</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    alb.ingress.kubernetes.io/backend-protocol: HTTPS</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    alb.ingress.kubernetes.io/listen-ports: &#x27;[{&quot;HTTP&quot;: 80}, {&quot;HTTPS&quot;: 443}]&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    alb.ingress.kubernetes.io/certificate-arn: &#x27;&lt;CERT ARN&gt;&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  port:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>ALB Ingress requires a tls cert stored in AWS ACM. Follow this procedure to generate a cert and key and import it to ACM. If you have a FQDN to use for the host, set it here for the CN or use a wildcard for your domain. Our example uses <code>*.amazonaws.com</code> </p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">openssl genrsa 2048 -out alb-key.pem</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">openssl req -new -x509 -nodes -sha256 -days 999 -key alb-key.pem -outform PEM -out alb-cert.pem -subj &quot;/C=US/ST=MA/L=Boston/O=IBM/OU=FSM/CN=*.amazonaws.com&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Import it into ACM with the following command. Region should be set to your cluster&#x27;s region.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">aws acm import-certificate \</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">--certificate fileb://alb-cert.pem \</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">--private-key fileb://alb-key.pem \</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">--region us-east-1 \</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">--tags &quot;Key=cluster,Value=sterling-mft-east&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">{</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    &quot;CertificateArn&quot;: &quot;arn:aws:acm:us-east-1:748107796891:certificate/7aa410d2-7d5d-488d-918d-a9fdfed5d77f&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">}</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Take note of the returned CertificateArn as this is the value you need for <code>alb.ingress.kubernetes.io/certificate-arn:</code></p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="nginx-controller-ingress">NGINX Controller Ingress<a href="#nginx-controller-ingress" class="hash-link" aria-label="Direct link to NGINX Controller Ingress" title="Direct link to NGINX Controller Ingress">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">ingress:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  enabled: true</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  controller: &quot;nginx&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  annotations:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    nginx.ingress.kubernetes.io/proxy-body-size: 2000m</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  port:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>For NGINX we need to update <code>nginx.ingress.kubernetes.io/proxy-body-size:</code> to a high size in order to be able to upload large jar files to the B2Bi api.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ingress-settings-for-each-application">Ingress settings for each application<a href="#ingress-settings-for-each-application" class="hash-link" aria-label="Direct link to Ingress settings for each application" title="Direct link to Ingress settings for each application">​</a></h4><p>AC and ASI should have their own <code>ingress</code> entries that will look similar to this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">  ingress:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    internal:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      host: &quot;*.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      tls:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        enabled: true</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        secretName: sterling-b2bi-b2bi-ac-frontend-svc</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      extraPaths: []</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    external:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      host: &quot;*.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      tls:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        enabled: true</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        secretName: sterling-b2bi-b2bi-ac-frontend-svc</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      extraPaths: []</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Set the <code>host:</code> entry to either a wildcard for your custom domain or the fqdn you established if you are using your own domain. The <code>secretName:</code> should match the service:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">sterling-b2bi-b2bi-asi-frontend-svc</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">sterling-b2bi-b2bi-ac-frontend-svc</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">sterling-b2bi-b2bi-api-frontend-svc</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For API use the same logic as above and use your specific FQDN or your wildcarded domain:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">  ingress:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    internal:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      host: &quot;*.amazonaws.com&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      tls:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        enabled: true</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        secretName: sterling-b2bi-b2bi-api-frontend-svc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-mq-info-in-the-overrides">Setting MQ info in the overrides<a href="#setting-mq-info-in-the-overrides" class="hash-link" aria-label="Direct link to Setting MQ info in the overrides" title="Direct link to Setting MQ info in the overrides">​</a></h3><p>Run the following sed commands on the overrides file. You should have the cluster-ip of the MQ service from a previous step in during Preparation:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">sed -i &quot;s/^jmsVendor:.*/jmsVendor: IBMMQ/&quot; sterling-b2bi-values.yaml</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">sed -i &quot;s/^jmsQueueName:.*/jmsQueueName: DEV.QUEUE.1/&quot; sterling-b2bi-values.yaml</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">sed -i &quot;s/^jmsHost:.*/jmsHost: 10.100.98.89/&quot; sterling-b2bi-values.yaml</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">sed -i &quot;s/^jmsChannel:.*/jmsChannel: DEV.APP.SVRCONN/&quot; sterling-b2bi-values.yaml</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">sed -i &quot;s/^jmsSecret:.*/jmsSecret: mq-secret/&quot; sterling-b2bi-values.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-the-database-info-in-the-overrides">Setting the Database info in the overrides<a href="#setting-the-database-info-in-the-overrides" class="hash-link" aria-label="Direct link to Setting the Database info in the overrides" title="Direct link to Setting the Database info in the overrides">​</a></h3><p>Run the following sed commands on the overrides file. Make sure you took note of the RDS url to access the RDS instance.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">sed -i &quot;s/^dbVendor:.*/dbVendor: Oracle/&quot; sterling-b2bi-values.yaml</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">sed -i &quot;s/^dbHost:.*/dbHost: sterling-mft-db.cehubq1eqcri.us-east-1.rds.amazonaws.com/&quot; sterling-b2bi-values.yaml</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">sed -i &quot;s/^dbPort:.*/dbPort: 1521/&quot; sterling-b2bi-values.yaml</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">sed -i &quot;s/^dbData:.*/dbData: ORCL/&quot; sterling-b2bi-values.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-network-policies">Custom Network Policies<a href="#custom-network-policies" class="hash-link" aria-label="Direct link to Custom Network Policies" title="Direct link to Custom Network Policies">​</a></h3><p>If your cluster is restrictive, you may need to add extra customPolicies to the overrides file. This can be found near the top and would resemble the following entries:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">global:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  license: true</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  image:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    repository: &quot;cp.icr.io/cp/ibm-b2bi/b2bi&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    tag: &quot;6.1.2.1&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    digest: sha256:7426e3f8d935f28135b3f2b9cd5bc653105af9609606da967cb1cf70ca0b49de</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    pullPolicy: IfNotPresent</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    pullSecret: &quot;ibm-pull-secret&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  networkPolicies:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    ingress:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      enabled: true</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      customPolicies:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    egress:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      enabled: true</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">// hightlight-start</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      customPolicies:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      - name: allow-egress-to-rds</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        toSelectors:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        - podSelector:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            matchLabels:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">              app.kubernetes.io/name: b2bi</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">              release: sterling-b2bi</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        - ipBlock:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            cidr: 192.168.99.219/32</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        ports:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          - protocol: TCP</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            port: 1521</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      - name: allow-egress-to-cd</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        toSelectors:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        - podSelector:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            matchLabels:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">              app.kubernetes.io/name: b2bi</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">              release: sterling-b2bi</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        - ipBlock:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            cidr: 192.168.99.219/32</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        ports:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">          - protocol: TCP</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">            port: 1366</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">// highlight-end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tls-secretnames-for-ingress">TLS SecretNames for ingress<a href="#tls-secretnames-for-ingress" class="hash-link" aria-label="Direct link to TLS SecretNames for ingress" title="Direct link to TLS SecretNames for ingress">​</a></h3><p>When the tls option is enabled for each app container, the secretName is created by the creattls job that is run at the beginning of the installation. So that secret can be applied in advance to the overrides:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">ac.ingress.external.tls.enabled = true</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">ac.ingress.external.tls.secretName = sterling-b2bi-b2bi-ac-frontend-svc</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">asi.ingress.external.tls.enabled = true</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">asi.ingress.external.tls.secretName = sterling-b2bi-b2bi-asi-frontend-svc</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">api.ingress.external.tls.enabled = true</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">api.ingress.external.tls.secretName = sterling-b2bi-b2bi-asi-frontend-svc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="perform-the-helm-installation">Perform the Helm installation<a href="#perform-the-helm-installation" class="hash-link" aria-label="Direct link to Perform the Helm installation" title="Direct link to Perform the Helm installation">​</a></h2><p>Run the helm installation with the following command</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">helm install sterling-b2bi -f sterling-b2bi-values.yaml /path/to/ibm-b2bi-prod --timeout 3600s --namespace sterling</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Installation should take approximately 40 minutes</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="application-validation">Application Validation<a href="#application-validation" class="hash-link" aria-label="Direct link to Application Validation" title="Direct link to Application Validation">​</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="default-sterling-users">Default Sterling Users:<a href="#default-sterling-users" class="hash-link" aria-label="Direct link to Default Sterling Users:" title="Direct link to Default Sterling Users:">​</a></h2><table><thead><tr><th>Role</th><th>User ID</th><th>Password</th></tr></thead><tbody><tr><td>System Administrator</td><td>fg_sysadmin</td><td>password</td></tr><tr><td>Integration Architect</td><td>fg_architect</td><td>password</td></tr><tr><td>Route Provisioner</td><td>fg_provisioner</td><td>password</td></tr><tr><td>Operator</td><td>fg_operator</td><td>password</td></tr></tbody></table><p>Relevant URL:
<a href="https://www.ibm.com/docs/en/b2b-integrator/6.1.2?topic=overview-sterling-file-gateway-tutorial" target="_blank" rel="noopener noreferrer">https://www.ibm.com/docs/en/b2b-integrator/6.1.2?topic=overview-sterling-file-gateway-tutorial</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ibm-client-engineering/solution-sfg-aws/tree/main/packages/create-docusaurus/templates/shared/docs/3-Create/Deploy.md" target="_blank" rel="noreferrer noopener" class="ThemeClassNames.common.editThisPage editThisPage_U9Uk">Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/solution-sfg-aws/category/create"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Create</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/solution-sfg-aws/Create/solution-validate"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Validate</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#required-secrets" class="table-of-contents__link toc-highlight">Required secrets</a></li><li><a href="#sidecar-deployment" class="table-of-contents__link toc-highlight">Sidecar Deployment</a><ul><li><a href="#generate-the-yaml-file" class="table-of-contents__link toc-highlight">Generate the yaml file</a></li><li><a href="#create-the-sidecar-pod-and-volume" class="table-of-contents__link toc-highlight">Create the sidecar pod and volume</a></li><li><a href="#retrieve-the-jdbc-driver-and-stage-it-to-the-pod" class="table-of-contents__link toc-highlight">Retrieve the JDBC driver and stage it to the pod</a></li></ul></li><li><a href="#download-the-sterling-helm-charts" class="table-of-contents__link toc-highlight">Download the Sterling helm charts</a><ul><li><a href="#update-our-chart-version" class="table-of-contents__link toc-highlight">Update our chart version</a></li><li><a href="#update-our-chart-version-1" class="table-of-contents__link toc-highlight">Update our chart version</a></li></ul></li><li><a href="#sterling-override-file" class="table-of-contents__link toc-highlight">Sterling Override File</a><ul><li><a href="#update-the-overrides-as-required" class="table-of-contents__link toc-highlight">Update the overrides as required</a></li><li><a href="#configuring-ingress-in-the-overrides" class="table-of-contents__link toc-highlight">Configuring Ingress in the overrides</a><ul><li><a href="#alb-ingress" class="table-of-contents__link toc-highlight">ALB Ingress</a></li><li><a href="#nginx-controller-ingress" class="table-of-contents__link toc-highlight">NGINX Controller Ingress</a></li><li><a href="#ingress-settings-for-each-application" class="table-of-contents__link toc-highlight">Ingress settings for each application</a></li></ul></li><li><a href="#setting-mq-info-in-the-overrides" class="table-of-contents__link toc-highlight">Setting MQ info in the overrides</a></li><li><a href="#setting-the-database-info-in-the-overrides" class="table-of-contents__link toc-highlight">Setting the Database info in the overrides</a></li><li><a href="#custom-network-policies" class="table-of-contents__link toc-highlight">Custom Network Policies</a></li><li><a href="#tls-secretnames-for-ingress" class="table-of-contents__link toc-highlight">TLS SecretNames for ingress</a></li></ul></li><li><a href="#perform-the-helm-installation" class="table-of-contents__link toc-highlight">Perform the Helm installation</a><ul><li><a href="#application-validation" class="table-of-contents__link toc-highlight">Application Validation</a></li></ul></li><li><a href="#default-sterling-users" class="table-of-contents__link toc-highlight">Default Sterling Users:</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Explore</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM</a></li><li class="footer__item"><a href="https://www.ibm.com/client-engineering" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM Client Engineering - Open Solutions Library</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://ibm.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="https://upload.wikimedia.org/wikipedia/commons/5/51/IBM_logo.svg" alt="IBM Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="150" height="150"><img src="https://upload.wikimedia.org/wikipedia/commons/5/51/IBM_logo.svg" alt="IBM Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="150" height="150"></a></div></div></div></footer></div>
<script src="/solution-sfg-aws/assets/js/runtime~main.4a676cb0.js"></script>
<script src="/solution-sfg-aws/assets/js/main.f9aeead2.js"></script>
</body>
</html>