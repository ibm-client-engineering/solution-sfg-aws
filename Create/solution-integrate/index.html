<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Create/solution-integrate">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Integrate | IBM Client Engineering</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ibm-client-engineering.github.io/solution-sfg-aws/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ibm-client-engineering.github.io/solution-sfg-aws/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ibm-client-engineering.github.io/solution-sfg-aws/Create/solution-integrate"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="ibm client engineering, open solutions library,  sfg, eks, aws, cp4ba, sfg on aws eks"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Integrate | IBM Client Engineering"><meta data-rh="true" name="description" content="Task Overview"><meta data-rh="true" property="og:description" content="Task Overview"><link data-rh="true" rel="icon" href="/solution-sfg-aws/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ibm-client-engineering.github.io/solution-sfg-aws/Create/solution-integrate"><link data-rh="true" rel="alternate" href="https://ibm-client-engineering.github.io/solution-sfg-aws/Create/solution-integrate" hreflang="en"><link data-rh="true" rel="alternate" href="https://ibm-client-engineering.github.io/solution-sfg-aws/Create/solution-integrate" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/solution-sfg-aws/blog/rss.xml" title="IBM Client Engineering RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/solution-sfg-aws/blog/atom.xml" title="IBM Client Engineering Atom Feed">






<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GB0XWXF3GE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GB0XWXF3GE",{anonymize_ip:!0})</script><link rel="stylesheet" href="/solution-sfg-aws/assets/css/styles.7c69883c.css">
<link rel="preload" href="/solution-sfg-aws/assets/js/runtime~main.a172f856.js" as="script">
<link rel="preload" href="/solution-sfg-aws/assets/js/main.58add4c5.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/solution-sfg-aws/"><div class="navbar__logo"><img src="/solution-sfg-aws/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA" height="200" width="200"><img src="/solution-sfg-aws/img/logo-dark.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU" height="200" width="200"></div><b class="navbar__title text--truncate">| IBM Sterling File Gateway on AWS EKS</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/solution-sfg-aws/">Flight Path</a><a class="navbar__item navbar__link" href="/solution-sfg-aws/blog">Flight Logs</a><a href="https://github.com/ibm-client-engineering/solution-sfg-aws" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/solution-sfg-aws/">Flight Path | Sterling B2BI on AWS EKS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/solution-sfg-aws/category/innovate">Innovate</a><button aria-label="Toggle the collapsible sidebar category &#x27;Innovate&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-sfg-aws/Innovate/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-sfg-aws/Innovate/refine">Refine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-sfg-aws/Innovate/solution-design">Architecture</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/solution-sfg-aws/category/prepare">Prepare</a><button aria-label="Toggle the collapsible sidebar category &#x27;Prepare&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-sfg-aws/Prepare/learn">Learn</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-sfg-aws/Prepare/organize">Organize</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-sfg-aws/Prepare/stage">Stage</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/solution-sfg-aws/category/manage">Manage</a><button aria-label="Toggle the collapsible sidebar category &#x27;Manage&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/solution-sfg-aws/category/create">Create</a><button aria-label="Toggle the collapsible sidebar category &#x27;Create&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-sfg-aws/Create/solution-deploy">Deploy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/solution-sfg-aws/Create/solution-validate">Validate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/solution-sfg-aws/Create/solution-integrate">Integrate</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/solution-sfg-aws/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/solution-sfg-aws/category/create"><span itemprop="name">Create</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Integrate</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Enabling S3 Bucket access</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="task-overview">Task Overview<a href="#task-overview" class="hash-link" aria-label="Direct link to Task Overview" title="Direct link to Task Overview">​</a></h2><p>Per the IBM Documentation, the following steps would need to be performed in order to allow for S3 bucket access:</p><p>Installing AWS SDK for Java on B2BI Certified Container/Docker deployment:</p><ol><li>On B2BI Dashboard, select Customization &gt; Customization. Click the Click Here To Access link. In the Customization login screen, enter the User Name and Password and click Login. (apiadmin/apipassword)</li><li>Click Custom Jar. The Custom Jar list page is displayed.
Click Create CustomJar.</li><li>Set the &#x27;Vendor Name&#x27; as &quot;awssdk&quot;. &#x27;Vendor Version&#x27; as the version from &quot;aws-java-sdk-<!-- -->[version]<!-- -->&quot; you downloaded earlier.</li><li>Set the &#x27;File Type&#x27; as &quot;LIBRARY&quot;. Set &#x27;Target Path&#x27; as &quot;Every&quot;.</li><li>Upload the files mentioned below (Create multiple custom jars using same parameters as mentioned in ibm-client-engineering/spog-fsm-st5#4 and ibm-client-engineering/spog-fsm-st5#5 above along with each file mentioned below):<ol><li>aws-java-sdk-<!-- -->[version]<!-- -->.jar (Found in aws-java-sdk-<!-- -->[version]<!-- -->/lib)</li><li>httpclient-<!-- -->[version]<!-- -->.jar</li><li>httpcore-<!-- -->[version]<!-- -->.jar</li><li>jackson-annotations-<!-- -->[version]<!-- -->.jar</li><li>jackson-core-<!-- -->[version]<!-- -->.jar</li><li>jackson-databind-<!-- -->[version]<!-- -->.jar</li><li>joda-time-<!-- -->[version]<!-- -->.jar</li><li>netty-*.jar (Found in aws-java-sdk-<!-- -->[version]<!-- -->/third-party/lib)</li></ol></li></ol><p>Restart the ASI/AC/API pods.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="task-breakdown">Task Breakdown<a href="#task-breakdown" class="hash-link" aria-label="Direct link to Task Breakdown" title="Direct link to Task Breakdown">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-an-apiadmin-user">Creating an <code>apiadmin</code> user<a href="#creating-an-apiadmin-user" class="hash-link" aria-label="Direct link to creating-an-apiadmin-user" title="Direct link to creating-an-apiadmin-user">​</a></h3><p>Login to our dashboard URL:</p><p><a href="https://k8s-ingressn-ingressn-f9d3dcbc72-69d548b3e1e33f06.elb.us-east-1.amazonaws.com/dashboard/" target="_blank" rel="noopener noreferrer">https://k8s-ingressn-ingressn-f9d3dcbc72-69d548b3e1e33f06.elb.us-east-1.amazonaws.com/dashboard/</a></p><ol><li>Select Accounts-&gt;User Accounts</li></ol><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/53dbc727-b0fa-4a6b-b514-61421a88eae1" alt="apiadmin_create_01|300" class="img_ev3q"></p><ol start="2"><li>Set the username to <code>apiadmin</code> with a password of <code>apipassword</code></li></ol><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/281121e5-0358-4a47-9a6a-2de6e4f65e8c" alt="apiadmin_create_02|300" class="img_ev3q"></p><ol start="3"><li>Skip SSH Authorized Keys as we do not require this for this account</li></ol><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/09287bb6-2f43-462f-92ce-8dccce62b39f" alt="apiadmin_create_03|300" class="img_ev3q"></p><ol start="4"><li>Under <code>Filter Data</code> search for <code>Sterling</code>, then Select <code>Sterling B2B Integrator Admin</code> and assign it. Then press <code>Next</code></li></ol><table><thead><tr><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left"><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/1e52ec87-11e4-48ae-88fb-af7a1fbc1b15" alt="apiadmin_create_04a|150" class="img_ev3q"></td><td align="left"><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/73b5ac62-2778-4975-9ab8-ce182a51f690" alt="apiadmin_create_04b|150" class="img_ev3q"></td></tr></tbody></table><ol start="5"><li>Permissions - Under <code>Filter Data</code> search for <code>APIUser</code>. Select <code>APIUser</code> and add it to the permissions below with the arrow. Then hit <code>Next</code>.</li></ol><table><thead><tr><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left"><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/9279d0e8-d713-476d-9c68-7a87f7cc7fe0" alt="apiadmin_create_05a|150" class="img_ev3q"></td><td align="left"><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/b21115d7-a14e-4448-b655-9d0381b89a87" alt="apiadmin_create_05b|150" class="img_ev3q"></td></tr></tbody></table><ol start="6"><li>User Information - Set the <code>Given Name</code> and <code>Surname</code> to <code>api</code> and <code>apiadmin</code> respectfully. Then click <code>Next</code>.</li></ol><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/fabef444-8f8c-4740-a98a-8440ce848704" alt="apiadmin_create_06|300" class="img_ev3q"></p><ol start="7"><li>Confirm - Verify all info is correct and then click <code>Finish</code></li></ol><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/57cca0b8-605f-4704-b235-70d43a6a5c06" alt="apiadmin_create_07|300" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="uploading-required-jar-files-for-s3-access">Uploading Required Jar files for S3 access<a href="#uploading-required-jar-files-for-s3-access" class="hash-link" aria-label="Direct link to Uploading Required Jar files for S3 access" title="Direct link to Uploading Required Jar files for S3 access">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="downloading-latest-aws-sdk-zip-file">Downloading latest AWS SDK zip file<a href="#downloading-latest-aws-sdk-zip-file" class="hash-link" aria-label="Direct link to Downloading latest AWS SDK zip file" title="Direct link to Downloading latest AWS SDK zip file">​</a></h3><p>Latest SDK can be retrieved here:</p><p><a href="https://sdk-for-java.amazonwebservices.com/latest/aws-java-sdk.zip" target="_blank" rel="noopener noreferrer">https://sdk-for-java.amazonwebservices.com/latest/aws-java-sdk.zip</a></p><p>Download the zip and extract it. The files needed will live at the following paths:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">aws-java-sdk-1.12.464/lib/aws-java-sdk-1.12.464.jar</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws-java-sdk-1.12.464/third-party/lib/httpclient-4.5.13.jar</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws-java-sdk-1.12.464/third-party/lib/httpcore-4.4.13.jar</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws-java-sdk-1.12.464/third-party/lib/jackson-annotations-2.12.7.jar</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws-java-sdk-1.12.464/third-party/lib/jackson-core-2.12.7.jar</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws-java-sdk-1.12.464/third-party/lib/jackson-databind-2.12.7.1.jar</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws-java-sdk-1.12.464/third-party/lib/joda-time-2.8.1.jar</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws-java-sdk-1.12.464/third-party/lib/netty-buffer-4.1.86.Final.jar</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws-java-sdk-1.12.464/third-party/lib/netty-codec-4.1.86.Final.jar</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws-java-sdk-1.12.464/third-party/lib/netty-codec-http-4.1.86.Final.jar</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws-java-sdk-1.12.464/third-party/lib/netty-common-4.1.86.Final.jar</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws-java-sdk-1.12.464/third-party/lib/netty-handler-4.1.86.Final.jar</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws-java-sdk-1.12.464/third-party/lib/netty-resolver-4.1.86.Final.jar</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws-java-sdk-1.12.464/third-party/lib/netty-transport-4.1.86.Final.jar</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">aws-java-sdk-1.12.464/third-party/lib/netty-transport-native-unix-common-4.1.86.Final.jar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Versions may be differnt as the <code>aws-java-sdk.zip</code> is always being updated.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="propertyui-url">PropertyUI url<a href="#propertyui-url" class="hash-link" aria-label="Direct link to PropertyUI url" title="Direct link to PropertyUI url">​</a></h3><p>Retrieve the propertyUI url. It can be retrieved with the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">echo &quot;https://&quot;$(kubectl get ingress sterling-b2bi-b2bi-ingress -o jsonpath=&#x27;{..hostname}&#x27;)&quot;/propertyUI/app/&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">https://myingress.elb.us-east-1.amazonaws.com/propertyUI/app/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Login using the <code>apiadmin</code> user we created with the password <code>apipassword</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upload-each-jar-file">Upload each jar file<a href="#upload-each-jar-file" class="hash-link" aria-label="Direct link to Upload each jar file" title="Direct link to Upload each jar file">​</a></h3><p>Select <code>CustomJar</code> from the top menubar</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/6d410788-68d4-4a1d-a66d-d719b0cf24e8" alt="customjars_01|300" class="img_ev3q"></p><p>Click <code>Create CustomJar</code> from the top of the page</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/cca5de3f-9d01-4bdb-9874-f379f119de27" alt="customjars_02|300" class="img_ev3q"></p><p>In this example we are uploading the latest <code>aws-java-sdk</code> jar file. Click the browse button and select the aws-java-sdk jar file from the path extracted above.</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/78111b83-f7c0-4027-ae76-5a086a8f8719" alt="customjars_03|300" class="img_ev3q"></p><p>When complete, click the <code>Save CustomJar</code> button.</p><p>Wash, rinse, repeat with the other jar files in the above list. </p><p>When complete, the page should look <em>similar</em> but not exactly like this:</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/394fa3dd-5ea4-4360-b619-d099009d5c85" alt="customjars_04|300" class="img_ev3q"></p><p>Restart all the pods.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">kubectl scale sts sterling-b2bi-b2bi-ac-server --replicas=0</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">kubectl scale sts sterling-b2bi-b2bi-asi-server --replicas=0</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">kubectl scale sts sterling-b2bi-b2bi-api-server --replicas=0</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">kubectl scale sts sterling-b2bi-b2bi-ac-server --replicas=1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">kubectl scale sts sterling-b2bi-b2bi-asi-server --replicas=1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">kubectl scale sts sterling-b2bi-b2bi-api-server --replicas=1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>You may need to update the startup probe failure threshold for the ASI application in your b2bi overrides file to 12 before restarting the pods after creating the above custom jars.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">  startupProbe:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    initialDelaySeconds: 120</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    timeoutSeconds: 30</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    periodSeconds: 60</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    failureThreshold: 12</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Whenever the pods are restarted, they will go through a copy process to install these custom jars and that adds to the load time. Without this change, the startup probe may wind up killing the ASI pod before this process is complete.</p></div></div><h1>B2Bi Adapter creation and configuration</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-communication-adapters">Configuring communication adapters:<a href="#configuring-communication-adapters" class="hash-link" aria-label="Direct link to Configuring communication adapters:" title="Direct link to Configuring communication adapters:">​</a></h2><p>The following adapters can be used with Sterling File Gateway:</p><table><thead><tr><th align="left">Protocol</th><th align="left">Adapter</th></tr></thead><tbody><tr><td align="left">FTP, FTPS</td><td align="left">FTP Server adapter</td></tr><tr><td align="left">FTP, FTPS</td><td align="left">FTP Client adapter and services</td></tr><tr><td align="left">SSH/SFTP, SSH/SCP</td><td align="left">SFTP Server adapter</td></tr><tr><td align="left">SSH/SFTP</td><td align="left">SFTP Client adapter and services</td></tr><tr><td align="left">Sterling Connect:Direct</td><td align="left">Connect:Direct Server adapter</td></tr><tr><td align="left">PGP</td><td align="left">Command Line Adapter 2</td></tr><tr><td align="left">HTTP, HTTPS, WebDAV (Requires extensibility. See Add Custom Protocols.)</td><td align="left">HTTP Server adapter</td></tr><tr><td align="left">HTTP, HTTPS, WebDAV (Requires extensibility. See Add Custom Protocols.)</td><td align="left">HTTP Client adapter and services</td></tr><tr><td align="left">WebSphere® MQ File Transfer Edition</td><td align="left">WebSphere MQ File Transfer Edition Agent adapter, WebSphere MQ Suite Async adapter, WebSphere MQ File Transfer Edition Create Transfer service, FTP Server Adapter</td></tr></tbody></table><p>Primary URL can be found with the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">kubectl get ingress sterling-b2bi-b2bi-ingress -o jsonpath=&quot;{..hostname}&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">k8s-ingressn-ingressn-f9d3dcbc72-69d548b3e1e33f06.elb.us-east-1.amazonaws.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Login to the dashboard as <code>fg_sysadmin</code>:</p><p><a href="https://k8s-ingressn-ingressn-f9d3dcbc72-69d548b3e1e33f06.elb.us-east-1.amazonaws.com/dashboard" target="_blank" rel="noopener noreferrer">https://k8s-ingressn-ingressn-f9d3dcbc72-69d548b3e1e33f06.elb.us-east-1.amazonaws.com/dashboard</a></p><p>From the main menu: </p><ol><li>Select Deployment &gt; Services &gt; Configuration.</li><li>Select and configure the adapters you require.</li></ol><p>As an example, let&#x27;s configure SFTP. Per the above table, SFTP is <code>SFTP Client adapter</code></p><p>Log out of dashboard and log back into the <code>filegateway</code> as <code>fg_architect</code>:</p><p><a href="https://k8s-ingressn-ingressn-f9d3dcbc72-69d548b3e1e33f06.elb.us-east-1.amazonaws.com/filegateway" target="_blank" rel="noopener noreferrer">https://k8s-ingressn-ingressn-f9d3dcbc72-69d548b3e1e33f06.elb.us-east-1.amazonaws.com/filegateway</a></p><p>From the main menu, select <strong>Participants &gt; Communities</strong> to create a community with the following values:</p><table><thead><tr><th>Field</th><th>Value</th></tr></thead><tbody><tr><td>Community Name</td><td>FirstComm</td></tr><tr><td>Partner Initiates Protocol Connection</td><td>X</td></tr><tr><td>Partner Listens for Protocol Connections</td><td>X</td></tr><tr><td>SSH/SFTP</td><td>X</td></tr><tr><td>Should Receive Notification</td><td>Yes</td></tr></tbody></table><p>Select <strong>Participants &gt; Groups</strong> to create a group named <code>Group1</code>.</p><p>Log out of <code>filegateway</code> and log back in as <code>fg_provisioner</code></p><p>Create two partners with the following values:</p><p>Select <strong>Participants &gt; Partners</strong> </p><table><thead><tr><th>Field</th><th>Value For First Partner</th><th>Value For Second Partner</th></tr></thead><tbody><tr><td>Community</td><td>FirstComm</td><td>FirstComm</td></tr><tr><td>Partner Name</td><td>Partner1</td><td>Partner2</td></tr><tr><td>Phone</td><td>333</td><td>444</td></tr><tr><td>Email</td><td><a href="mailto:y@x.com" target="_blank" rel="noopener noreferrer">y@x.com</a></td><td><a href="mailto:x@y.com" target="_blank" rel="noopener noreferrer">x@y.com</a></td></tr><tr><td>User Name</td><td>partner1</td><td>partner2</td></tr><tr><td>Password</td><td>p@ssw0rd</td><td>p@ssw@rd</td></tr><tr><td>Given Name</td><td>partner</td><td>partner</td></tr><tr><td>Surname</td><td>1</td><td>2</td></tr><tr><td>Partner Role</td><td>Is a consumer of data - Initiates a connection</td><td>Is a producer of data</td></tr><tr><td>Use SSH</td><td>Yes</td><td>Yes</td></tr><tr><td>Use Authorized User Key</td><td>No</td><td>No</td></tr><tr><td>PGP Settings</td><td>- No - No</td><td>- No - No</td></tr></tbody></table><p>Associate the partners with Group1. Select Participants &gt; Groups &gt; Add Partner. Select the partners and the group, and click Execute</p><p>Log out and log back into the <code>filegateway</code> as <code>fg_architect</code></p><p>Select Routes &gt; Templates &gt; Create to create a routing channel template with the following values:</p><table><thead><tr><th align="left"></th><th align="left"></th></tr></thead><tbody><tr><td align="left"><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/260bc4f3-f735-48bf-8f93-af875861e416" alt="Template_Type.png|300" class="img_ev3q"></td><td align="left"><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/f513633a-f09d-4e37-a59a-9688e128a84f" alt="Template_Special_Characters.png|300" class="img_ev3q"></td></tr><tr><td align="left"><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/0b40b765-bf0b-4ce7-851f-4014416bbe0d" alt="Template_Groups.png|300" class="img_ev3q"></td><td align="left"><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/18c24d5d-ea91-4ac4-ba97-061bbd8f13e9" alt="Template_Provisioning_Facts.png|300" class="img_ev3q"></td></tr><tr><td align="left"><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/66378f70-9226-4789-80fb-73ec8de62c5f" alt="Template_Producer_File_Structure.png|300" class="img_ev3q"></td><td align="left"><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/49d355aa-03a2-456a-9cde-260602bc8c77" alt="Template_Consumer_File_Structure_add.png|300" class="img_ev3q"></td></tr><tr><td align="left"><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/5acfa848-027d-4ec7-95a3-c01cd38cf2bf" alt="Template_Consumer_File_Structure_format.png|300" class="img_ev3q"></td><td align="left"><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/e41e146b-8f13-4266-a692-01ac0768d467" alt="Template_Consumer_File_Structure_Save.png|300" class="img_ev3q"></td></tr></tbody></table><p>Save the template</p><p>Log out and log back into <code>filegateway</code> as <code>fg_provisioner</code></p><p>Create a routing channel with the following values:</p><table><thead><tr><th>Field</th><th>Value</th></tr></thead><tbody><tr><td>Routing Channel Template</td><td>FirstStatic</td></tr><tr><td>Producer</td><td>Partner2</td></tr><tr><td>Consumer</td><td>Partner1</td></tr><tr><td>User ID</td><td>User1</td></tr></tbody></table><p>Log out of the UI and log in to the <code>myFileGateway</code> ui as <code>partner2</code>. You will probably need to change the password on first login.</p><p><a href="https://k8s-ingressn-ingressn-f9d3dcbc72-69d548b3e1e33f06.elb.us-east-1.amazonaws.com/myfilegateway" target="_blank" rel="noopener noreferrer">https://k8s-ingressn-ingressn-f9d3dcbc72-69d548b3e1e33f06.elb.us-east-1.amazonaws.com/myfilegateway</a></p><p>Upload a text file to the <code>/</code> mailbox and then log out.</p><p>Log in to <code>myfilegateway</code> as <code>partner1</code>. You will probably need to change the password on first login.</p><p>Click the <code>Download File</code> tab and see if the file is there. Since Partner1 is the consumer and Partner2 is the sender, the file should show up there.</p><p>Click on the file and download. Verify the file is downloaded and matches the naming convention we set.</p><p>Log out and log back in to <code>filegateway</code> as <code>fg_operator</code>. If the default <code>password</code> password does not work for him, you might need to log back into the dashboard as <code>fg_sysadmin</code> and manually set <code>fg_operator</code>&#x27;s password. Then you will be required to change it when you log in to the <code>filegateway</code></p><p>Search for the file that was uploaded. We called it <code>readme.txt</code> in this example.</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/49489c00-e2f6-411f-9673-9f63226ef131" alt="File_search.png|300" class="img_ev3q"></p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/86314ce6-4907-4ae1-a94b-ce18e03f9f44" alt="File_search2.png|300" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sftp-access">SFTP Access<a href="#sftp-access" class="hash-link" aria-label="Direct link to SFTP Access" title="Direct link to SFTP Access">​</a></h3><p>In order to enable the SFTP Server Adapter, we first must create a host key.</p><p>Log into the <code>dashboard</code> url for B2Bi and select:</p><p><strong>Deployment-&gt;SSH Host Indentity Key</strong></p><p>Select the <strong>Go</strong> button next to New Host Identity key</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/b56c7114-5beb-4426-926e-2a1808ef3edb" alt="sfg-sftp-server-adapter-step01.png|300" class="img_ev3q"></p><p>Set the hostname to something that matches. In our example we set it to <code>sterlingb2bi</code> and then set the key length to 2048.</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/7e71dfce-3241-4125-8f51-a9f1ed94e90f" alt="sfg-sftp-server-adapter-step02.png|300" class="img_ev3q"></p><p>Under <strong>Deployment-&gt;Services-&gt;Configuration</strong> Create the new service.</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/243cebad-f948-4bb2-8672-6393f90f87fe" alt="sfg-sftp-server-adapter-step03.png|300" class="img_ev3q"></p><p>Select <code>SFTP Server Adapter 2.0</code> under the Service Type.</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/bb6ca076-7c3e-48d5-8e39-5898f0255280" alt="sfg-sftp-server-adapter-step04.png|300" class="img_ev3q"></p><p>Under <code>Services Configuration</code>, let&#x27;s name this <code>SFTP Server Inbound</code> and also set that as the description. While B2BI has the capability of scaling the service to live across multiple pods, for now we are going to have it just live on our AC service pod.</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/40abfb52-fb37-4de5-bde5-8f0ca664e1ef" alt="sfg-sftp-server-adapter-step05.png|300" class="img_ev3q"></p><p>Let&#x27;s configure our Services Configuration for SFTP Server Inbound with the following values. Our <code>Host Identity Key</code> will be pre-populated with the host key we already created.</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/e0c21c1d-7384-4a5f-b238-af51f3889d3a" alt="sfg-sftp-server-adapter-step06.png|300" class="img_ev3q"></p><p>Now let&#x27;s set our document storage. For testing purposes we selected the Database to be our storage location where the files will be stored as blobs. Going forward this might not be the ideal location, but it is suitable for testing.</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/35ba645a-aef0-4d03-a6f2-97dabaf7e89c" alt="sfg-sftp-server-adapter-step07.png|300" class="img_ev3q"></p><p>Next let&#x27;s configure our allowed users. This can be set to match a group, but for our purposes, we will use the two partner ids we created above.</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/5e11b2c0-17f6-4e74-a2c3-fdd7ecb615f2" alt="sfg-sftp-server-adapter-step08.png|300" class="img_ev3q"></p><p>Our final services configuration should look similar to below. Make sure to check <code>Enable Service for Business Processes</code> as this will actually start the service. Also important to note that the listen port for the service will be <code>50039</code>.</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/aca6e922-c6cc-4dc9-855c-9b81329596bd" alt="sfg-sftp-server-adapter-step09.png|300" class="img_ev3q"></p><p>Let&#x27;s verify the SFTP Adapter Service came up.</p><p>Under <strong>Services-&gt;Configuration</strong> search for <code>SFTP Inbound</code> as that&#x27;s what we called this service adapter.</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/1272cbe7-93a2-426e-b6fe-0f7dddb06425" alt="sfg-sftp-server-adapter-step10.png|300" class="img_ev3q"></p><p>Under the <code>Select Node</code> dropdown, set it to <code>node1AC1</code> as that&#x27;s where we hosted this adapter service.</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/5a450a3e-9b71-4739-b8dc-b460748c9889" alt="sfg-sftp-server-adapter-step11.png|300" class="img_ev3q"></p><p>You should see under Advanced Stats that the service in running and enabled. Clicking the exclaimation point next to <code>Enabled</code> will show you the service log.</p><p><img loading="lazy" src="https://zenhub.ibm.com/images/58adc1fd5a3922f84995d86b/17ae7acc-d868-40a7-8e34-73d47daf37c9" alt="sfg-sftp-server-adapter-step12.png|300" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cluster-configuration-to-allow-inbound-access">Cluster configuration to allow inbound access<a href="#cluster-configuration-to-allow-inbound-access" class="hash-link" aria-label="Direct link to Cluster configuration to allow inbound access" title="Direct link to Cluster configuration to allow inbound access">​</a></h3><p>So because we enabled the adapter to the AC node, we would need to add the extra ports to the overrides yaml for that service. </p><p>We are also listening to port 50039</p><p>So we update our AC overrides with the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">ac:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  replicaCount: 1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  env:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    jvmOptions:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    #Refer to global env.extraEnvs for sample values</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    extraEnvs: []</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  frontendService:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    type: ClusterIP</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      http: </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        name: http</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        port: 35004</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        targetPort: http</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        nodePort: 30004</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    extraPorts:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      - name: sftp-frontend</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        port: 50039</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        targetPort: 50039</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        nodePort: 50039</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    loadBalancerIP:  </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    annotations: {}  </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  backendService:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    type: LoadBalancer</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      - name: adapter-1</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        port: 30401</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        targetPort: 30401</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        nodePort: 30401</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      - name: sftp-backend</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        port: 50039</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        targetPort: 50039</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        nodePort: 50039</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    portRanges:</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      - name: adapters</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        portRange: 30501-30510</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        targetPortRange: 30501-30510</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        nodePortRange: 30501-30510</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        protocol: TCP</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    loadBalancerIP:  </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    annotations: {} </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let&#x27;s run a helm upgrade after updating our overrides:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">helm upgrade sterling-b2bi --debug -f overrides/sterling-b2bi-values.yaml ibm-b2bi-prod --timeout 3600s --namespace sterling</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When that is complete, retrieve the loadbalancer address with the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">kubectl get service sterling-b2bi-b2bi-ac-backend-svc -o jsonpath=&quot;{..hostname}&quot;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">a3185b1737b284bcea6584859ea689e3-2046710660.us-east-1.elb.amazonaws.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Verify that SFTP works from cmdline with the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">sftp -P 50039 partner2@a3185b1737b284bcea6584859ea689e3-2046710660.us-east-1.elb.amazonaws.com</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">The authenticity of host &#x27;[a3185b1737b284bcea6584859ea689e3-2046710660.us-east-1.elb.amazonaws.com]:50039 ([3.214.94.81]:50039)&#x27; can&#x27;t be established.</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">RSA key fingerprint is SHA256:fVTB9EihSrd651+zvl2RvzjuhZX11iwQaxNwBgDyvT4.</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">This key is not known by any other names</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">Warning: Permanently added &#x27;[a3185b1737b284bcea6584859ea689e3-2046710660.us-east-1.elb.amazonaws.com]:50039&#x27; (RSA) to the list of known hosts.</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">SSH Server supporting SFTP and SCP</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">partner2@a3185b1737b284bcea6584859ea689e3-2046710660.us-east-1.elb.amazonaws.com&#x27;s password: </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">Connected to a3185b1737b284bcea6584859ea689e3-2046710660.us-east-1.elb.amazonaws.com.</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">sftp&gt;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We should now be able to put files here and observe their routing in the filegateway</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>You may need to update the health check ports in AWS EC2 for the loadbalancer to point to port <code>50039</code> or the nodePort as this will otherwise not allow traffic in.</p><p>If you run into any helm error when adding the extra ports definitions that has &quot;doesn&#x27;t match $setElementOrder list&quot; in the output, it&#x27;s possible this is a helm related bug. Re-run the &quot;helm upgrade&quot; with &quot;--force&quot;</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ibm-client-engineering/solution-sfg-aws/tree/main/packages/create-docusaurus/templates/shared/docs/3-Create/Integrate.md" target="_blank" rel="noreferrer noopener" class="ThemeClassNames.common.editThisPage editThisPage_U9Uk">Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/solution-sfg-aws/Create/solution-validate"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Validate</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#task-overview" class="table-of-contents__link toc-highlight">Task Overview</a></li><li><a href="#task-breakdown" class="table-of-contents__link toc-highlight">Task Breakdown</a><ul><li><a href="#creating-an-apiadmin-user" class="table-of-contents__link toc-highlight">Creating an <code>apiadmin</code> user</a></li></ul></li><li><a href="#uploading-required-jar-files-for-s3-access" class="table-of-contents__link toc-highlight">Uploading Required Jar files for S3 access</a><ul><li><a href="#downloading-latest-aws-sdk-zip-file" class="table-of-contents__link toc-highlight">Downloading latest AWS SDK zip file</a></li><li><a href="#propertyui-url" class="table-of-contents__link toc-highlight">PropertyUI url</a></li><li><a href="#upload-each-jar-file" class="table-of-contents__link toc-highlight">Upload each jar file</a></li></ul></li><li><a href="#configuring-communication-adapters" class="table-of-contents__link toc-highlight">Configuring communication adapters:</a><ul><li><a href="#sftp-access" class="table-of-contents__link toc-highlight">SFTP Access</a></li><li><a href="#cluster-configuration-to-allow-inbound-access" class="table-of-contents__link toc-highlight">Cluster configuration to allow inbound access</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Explore</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.ibm.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM</a></li><li class="footer__item"><a href="https://www.ibm.com/client-engineering" target="_blank" rel="noopener noreferrer" class="footer__link-item">IBM Client Engineering - Open Solutions Library</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://ibm.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="https://upload.wikimedia.org/wikipedia/commons/5/51/IBM_logo.svg" alt="IBM Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="150" height="150"><img src="https://upload.wikimedia.org/wikipedia/commons/5/51/IBM_logo.svg" alt="IBM Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="150" height="150"></a></div></div></div></footer></div>
<script src="/solution-sfg-aws/assets/js/runtime~main.a172f856.js"></script>
<script src="/solution-sfg-aws/assets/js/main.58add4c5.js"></script>
</body>
</html>